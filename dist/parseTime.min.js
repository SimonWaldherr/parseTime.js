/* * * * * * * * * *
 *  parseTime .js  *
 *  Version 0.2.7  *
 *  License:  MIT  *
 * Simon  Waldherr *
 * * * * * * * * * */

var parseTimeObject={words:{en:{currently:["now"],clockwords:["oclock","o'clock"],numbers:{zero:0,one:1,two:2,three:3,"a few":3.5,some:3.5,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100,thousend:1e3,million:1e6},unit:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6,decade:31536e7},countable:{"before yesterday":-1728e4,yesterday:-864e4,today:1,"day after tomorrow":1728e4,tomorrow:864e4,"in a week":6048e4,"last week":-6048e4},month:{jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12"},daytime:{dawn:"04:00",morning:"06:00",afternoon:"15:00",noon:"12:00",midday:"12:00","pre-evening":"17:00",preevening:"17:00",evening:"19:00",dusk:"20:00",midnight:"24:00",night:"22:00"},fillwords:{ago:"-","in":"+"},fillfoo:{s:"","\\-":"","\\ ":"","\\.":""}}},regexes:{}},parseTime=function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="",t={},u={},v=function(a,b){var c,e="";for(c in parseTimeObject.words[d][a])void 0!==parseTimeObject.words[d][a][c]&&(b===!1?e+="|":b=!1,e+=c);return e},w=function(a,b){var c,d,e={},f=Object.keys(a);for(c=0;c<f.length;c+=1)-1!==b.indexOf(f[c])&&(e[f[c]]=b.indexOf(f[c]),d=!0);return d?e:!1};void 0===b?b=(new Date).getTime():"object"==typeof b&&(b=b.getTime()),a=a.toLowerCase().replace(/["'<>\(\)]/gm,"").replace(/(\d)([A-Za-z])/,"$1 $2","gm"),a=a.replace(/([^\x00-\x7F])/gm,encodeURIComponent),b=parseInt(b,10);for(d in parseTimeObject.words)if(0!==parseTimeObject.words.length){q=parseTimeObject.words[d];for(r in q.countable)a===r&&(k=q.countable[r],a=k>0?"in "+k/100+" seconds":k/100+" seconds ago");for(p in q.currently)if(a===q.currently[p])return{absolute:Date.now(),relative:0,mode:"now",pb:1}}if(u.parsed=new Date,u.parsed=new Date(Date.parse(a.replace(/((\d{1,2})(th |rd |ter ))/,"$2 ","gm"))),!isNaN(u.parsed))return-1===a.indexOf(u.parsed.getFullYear())&&(u.now=new Date,u.now=Date.parse(b),isNaN(u.now)||(u.parsed.setFullYear(u.now.getFullYear()),u.parsed.setTime(u.parsed.getTime()+864e5))),u.parsed=u.parsed.getTime(),{absolute:u.parsed,relative:u.parsed-b,mode:"absolute",pb:2};for(d in parseTimeObject.words)""!==s&&(s+="|"),s+=" "+parseTimeObject.words[d].clockwords.join("| ");if(o=new RegExp("((\\S+\\s){0,4}(\\d{1,2})((:(\\d{1,2})(:(\\d{1,2})(\\.(\\d{1,4}))?)?)|("+s+")))"),l=/((\d\d)\.(\d\d)\.(\d\d\d\d)[ \D]+(\d\d(:\d\d(:\d\d)?)?(\s\S+)?))/.exec(a),null!==l?(m=o.exec(l[5])||l,u.day=1===l[2].length?"0"+l[2]:l[2],u.month=1===l[3].length?"0"+l[3]:l[3],u.year=2===l[4].length?"20"+l[4]:l[4],u.hour=void 0===m[3]?"12":1===m[3].length?"0"+m[3]:m[3],u.minute=void 0===m[6]?"00":1===m[6].length?"0"+m[6]:m[6],u.second=void 0===m[7]?"00":1===m[7].length?"0"+m[7]:m[7],u.second=u.second.replace(":",""),h=3):(l=o.exec(a),null!==l?(u.countable=l[0],u.hour=void 0===l[3]?"12":1===l[3].length?"0"+l[3]:l[3],u.minute=void 0===l[6]?"00":1===l[6].length?"0"+l[6]:l[6],u.second=void 0===l[7]?"00":1===l[7].length?"0"+l[7]:l[7],u.second=u.second.replace(":",""),h=4):(l=/((\d\d)[\.:,\/](\d\d)[\.:,\/](\d\d\d\d)(\s\S+){0,4})/.exec(a),null!==l&&(u.day=1===l[2].length?"0"+l[2]:l[2],u.month=1===l[3].length?"0"+l[3]:l[3],u.year=2===l[4].length?"20"+l[4]:l[4],u.countable=l[5],h=5))),a=" "+a+" ",void 0!==u.hour){for(d in parseTimeObject.words)if(void 0!==parseTimeObject.words[d])for(j in parseTimeObject.words[d].countable)void 0!==parseTimeObject.words[d].countable[j]&&void 0!==u.countable&&-1!==u.countable.indexOf(j)&&void 0===u.countableint&&(u.countableint=parseTimeObject.words[d].countable[j])}else for(d in parseTimeObject.words)if(void 0!==parseTimeObject.words[d])for(j in parseTimeObject.words[d].daytime)void 0!==parseTimeObject.words[d].daytime[j]&&(void 0!==u.countable?(u.countable=u.countable.trim(),-1!==u.countable.indexOf(j)&&void 0===u.countableint&&(u.countableint=0,u.hour=parseTimeObject.words[d].daytime[j].split(":")[0],u.minute=parseTimeObject.words[d].daytime[j].split(":")[1],u.second="00",h=6)):-1!==a.indexOf(j)&&w(parseTimeObject.words[d].countable,a)!==!1&&(l=j,j=w(parseTimeObject.words[d].countable,a),j=Object.keys(j)[0],void 0!==j&&j!==l&&(u.countable=j,u.countableint=parseTimeObject.words[d].countable[j],l=parseTimeObject.words[d].daytime[l],u.hour=l.split(":")[0],u.minute=l.split(":")[1],u.second="00",h=7)));if(u.now=void 0!==u.countableint?new Date(b+u.countableint).getTime():new Date(b).getTime(),void 0===u.year?(u.parsed=new Date,u.parsed.setTime(u.now),u.day=u.parsed.getDate().toString(),u.month=(u.parsed.getMonth()+1).toString(),u.year=u.parsed.getFullYear().toString(),u.day=1===u.day.length?"0"+u.day:u.day,u.month=1===u.month.length?"0"+u.month:u.month,u.today=u.year+"-"+u.month+"-"+u.day):u.today=u.year+"-"+u.month+"-"+u.day,void 0!==u.hour?(u.string=u.today+"T"+u.hour+":"+u.minute+":"+u.second+"+00:00",u.parsed=new Date,u.parsed=Date.parse(u.string)):void 0!==u.day&&void 0!==u.today&&(u.string=u.today+"T12:00:00+00:00",u.parsed=new Date,u.parsed=Date.parse(u.string)),"number"==typeof u.parsed&&void 0!==h&&!isNaN(u.parsed))return n=-3e4*(new Date).getTimezoneOffset(),3===h||5===h?u.parsed=u.parsed-n:4===h&&(u.parsed=u.parsed-2*n),{absolute:u.parsed,relative:u.parsed-b,mode:"absolute",pb:h};for(d in parseTimeObject.words)void 0!==parseTimeObject.words[d]&&(parseTimeObject.regexes[d]="((",parseTimeObject.regexes[d]+=v("fillfoo",!0),parseTimeObject.regexes[d]+=")+(",parseTimeObject.regexes[d]+=v("fillwords",!0),parseTimeObject.regexes[d]+=")*(",parseTimeObject.regexes[d]+=v("fillfoo",!0),parseTimeObject.regexes[d]+=")*(\\d+",parseTimeObject.regexes[d]+=v("numbers",!1),parseTimeObject.regexes[d]+=")+(",parseTimeObject.regexes[d]+=v("fillfoo",!0),parseTimeObject.regexes[d]+=")*((",parseTimeObject.regexes[d]+=v("unit",!0),parseTimeObject.regexes[d]+=")(",parseTimeObject.regexes[d]+=v("fillfoo",!0),parseTimeObject.regexes[d]+=")*",parseTimeObject.regexes[d]+=v("fillfoo",!1),parseTimeObject.regexes[d]+=")*(",parseTimeObject.regexes[d]+=v("fillwords",!0),parseTimeObject.regexes[d]+=")*(",parseTimeObject.regexes[d]+=v("fillfoo",!0),parseTimeObject.regexes[d]+=")+)");for(d in parseTimeObject.regexes)if(void 0!==parseTimeObject.regexes[d]&&(c=new RegExp(parseTimeObject.regexes[d]),e=c.exec(a),f=0,null!==e&&void 0!==e[8]))return g=isNaN(parseInt(e[5],10))?parseTimeObject.words[d].numbers[e[5]]:parseInt(e[5],10),i=parseTimeObject.words[d].unit[e[8].toLowerCase()],f=g*i,-1!==e.indexOf(Object.keys(parseTimeObject.words[d].fillwords)[0])?(u.parsed=-f,{absolute:b-f,relative:u.parsed,mode:"relative",pb:8}):{absolute:b+f,relative:f,mode:"relative",pb:9};return t.match=/(\d\d?)[,\.](\d\d?)[,\.](\d\d(\d\d)?)/.exec(a),null!==t.match?(t.day=t.match[1],t.month=t.match[2],t.year=t.match[3],h=10):(t.match=/(\d\d(\d\d)?)[\/\-](\d\d?)[\/\-](\d\d?)/.exec(a),null!==t.match&&(t.day=t.match[4],t.month=t.match[3],t.year=t.match[1],h=11)),void 0!==t.day?(t.day=1===t.day.length?"0"+t.day:t.day,t.month=1===t.month.length?"0"+t.month:t.month,t.year=2===t.year.length?parseInt(t.year,10)>70?"19"+t.year:"20"+t.year:t.year,u.today=t.year+"-"+t.month+"-"+t.day,u.string=u.today+"T12:00:00+00:00",u.parsed=new Date,u.parsed=Date.parse(u.string),{absolute:u.parsed,relative:u.parsed-b,mode:"absolute",pb:h}):{absolute:!1,relative:!1,mode:"error",pb:!1}};parseTimeObject.words.de={currently:["jetzt"],clockwords:["uhr"],numbers:{"null":0,ein:1,zwei:2,drei:3,"ein paar":3.5,einigen:3.5,vier:4,"f%C3%BCnf":5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,"zw%C3%B6lf":12,dreizehn:13,vierzehn:14,"f%C3%BCnfzehn":15,sechzehn:16,siebzehn:17,achzehn:18,neinzehn:19,zwanzig:20,"dreißig":30,vierzig:40,"f%C3%BCnfzig":50,sechzig:60,siebzig:70,achtzig:80,neunzig:90,hundert:100,tausend:1e3,million:1e6},countable:{vorgestern:-1728e4,gestern:-864e4,heute:1,"%C3%BCbermorgen":1728e4,morgen:864e4,"n%C3%A4chste woche":6048e4,"kommende woche":6048e4,"letzte woche":-6048e4,"vorherige woche":-6048e4},daytime:{"morgend%C3%A4mmerung":"04:00",tagesanbruch:"04:00",morgen:"06:00",vormittag:"09:00",nachmittag:"15:00",mittag:"12:00","pr%C3%A4abend":"17:00",abend:"19:00","d%C3%A4mmerung":"20:00",mitternacht:"24:00",nacht:"22:00"},unit:{millisekunde:1,sekunde:1e3,minute:6e4,stunde:36e5,tag:864e4,woche:6048e5,monat:2592e6,quartal:7776e6,jahr:31536e6,dekade:31536e7},fillwords:{vor:"-","in":"+"},fillfoo:{"\\-":"","\\ ":"",e:"",en:"",er:"",n:""}},parseTimeObject.words.fr={currently:["maintenant"],clockwords:["horloge","heures"],numbers:{zero:0,un:1,deux:2,trois:3,"peu de":3.5,quelques:3.5,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13,quatorze:14,quinze:15,seize:16,"dix-sept":17,"dix-huit":18,"dix-neuf":19,vingt:20,trente:30,quarante:40,cinquante:50,soixante:60,"soixante-dix":70,"quatre-vingt":80,"quatre-vingt-dix":90,cent:100,mille:1e3,million:1e6},unit:{milliseconde:1,seconde:1e3,minute:6e4,heure:36e5,jour:864e5,semaine:6048e5,mois:2592e6,trimestre:7776e6,an:31536e6,"d%C3%A9c%C3%A9nie":31536e7},countable:{"avant hier":-1728e4,hier:-864e4,"aujourd'hui":1,ajd:1,"apr%C3%A8s demain":1728e4,demain:864e4,"dans une semaine":6048e4,"la semaine prochaine":6048e4,"la semaine derni%C3%A8re":-6048e4,"la semaine pass%C3%A9e":-6048e4},month:{jan:"01",fev:"02",mar:"03",avr:"04",mai:"05",juin:"06",juil:"07",aou:"08",sep:"09",oct:"10",nov:"11",dec:"12"},daytime:{aube:"04:00",matin:"06:00","apr%C3%A8s-midi":"15:00","apr%C3%A8m":"15:00",midi:"12:00","go%C3%BBter":"17:00","quattre-heure":"16:00","debut de soir%C3%A9e":"17:00","soir%C3%A9e":"19:00",repas:"20:00",minuit:"24:00",nuit:"22:00"},fillwords:{"il y a":"-",dans:"+"},fillfoo:{s:"","\\-":"","\\ ":"","\\.":""}},parseTimeObject.words.pt={currently:["agora"],clockwords:["relógio"],numbers:{zero:0,"e meio":.5,um:1,dois:2,"tr%C3%AAs":3,poucos:3.5,alguns:3.5,quatro:4,cinco:5,seis:6,sete:7,oito:8,nove:9,dez:10,onze:11,doze:12,treze:13,catorze:14,quinze:15,dezesseis:16,dezessete:17,dezoito:18,dezenove:19,vinte:20,trinta:30,quarenta:40,cinquenta:50,sessenta:60,setenta:70,oitenta:80,noventa:90,cem:100,mil:1e3,"milh%C3%A3o":1e6},unit:{milissegundo:1,segundo:1e3,minuto:6e4,hora:36e5,dia:864e5,semana:6048e5,"m%C3%AAs":2592e6,trimestre:7776e6,ano:31536e6,"d%C3%A9cada":31536e7},countable:{"antes de ontem":-1728e4,ontem:-864e4,hoje:1,"depois de amanh%C3%A3":1728e4,"amanh%C3%A3":864e4,"em uma semana":6048e4,"%C3%BAltima semana":-6048e4},month:{jan:"01",fev:"02",mar:"03",abril:"04",mai:"05",jun:"06",jul:"07",ago:"08",set:"09",out:"10",nov:"11",dez:"12"},daytime:{madrugada:"04:00","manh%C3%A3":"06:00",tarde:"15:00","meio-dia":"12:00","pr%C3%A9-noite":"17:00","crep%C3%BAsculo":"20:00","meia-noite":"24:00",noite:"22:00"},fillwords:{"atr%C3%A1s":"-",em:"+"},fillfoo:{s:"","\\-":"","\\ ":"","\\.":""}};